<?xml version="1.1" encoding="UTF-8"?>
<model>
  <classes>
    <class name="root_model_object">
      <attributes>
        <attribute
          name="version"
          visibility="protected"
          type="uint32"
          mandatory="true" 
          min="1">
        </attribute>
        <attribute
          name="id"
          visibility="protected"
          type="uint32"
          mandatory="true" 
          min="1">
        </attribute>
        <attribute
          name="created_by"
          visibility="protected"
          type="string"
          mandatory="true" 
          min-length="3">
        </attribute>
        <attribute
          name="created_at"
          visibility="protected"
          type="date"
          mandatory="true">
        </attribute>
        <attribute
          name="updated_by"
          visibility="protected"
          type="string"
          mandatory="true" 
          min-length="3">
        </attribute>
        <attribute
          name="updated_at"
          visibility="protected"
          type="date"
          mandatory="true">
        </attribute>
      </attributes>
    </class>
    <class name="user" extend="root_model_object">
      <attributes>
        <attribute
          name="login"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true" 
          unique-insensitive="true" 
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,32}/$">
        </attribute>
        <attribute
          name="password"
          visibility="private"
          type="string"
          mandatory="true"
          min-length="8" 
          pattern="/^.*(?:(?:[a-z].*[A-Z].*\d)|(?:[A-Z].*\d.*[a-z])|(?:\d.*[a-z].*[A-Z])).*/$">
        </attribute>
        <attribute
          name="salt_user"
          visibility="private"
          type="string"
          mandatory="true"
          min-length="32">
        </attribute>
        <attribute
          name="salt_session"
          visibility="private"
          type="string"
          mandatory="true"
          min-length="32">
        </attribute>
        <attribute
          name="token"
          visibility="private"
          type="string"
          mandatory="true"
          min-length="32">
        </attribute>
        <attribute
          name="last_connection"
          visibility="private"
          type="date"
          mandatory="false">
        </attribute>
        <attribute
          name="friends"
          visibility="private"
          type="user[]"
          mandatory="false"
          bidirectional="false"
          cardinality="one_to_many">
        </attribute>
        <attribute
          name="groups"
          visibility="private"
          type="group[]"
          mandatory="true"
          cardinality="many_to_many">
        </attribute>
        <attribute
          name="teams"
          visibility="private"
          type="team[]"
          mandatory="false"
          cardinality="many_to_many">
        </attribute>
      </attributes>
    </class>
    <class name="group" extend="root_model_object">
      <attributes>
        <attribute
          name="name"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true"  
          min-length="3" 
          pattern="/^[a-z]{3,32}/$">
        </attribute>
        <attribute
          name="members"
          visibility="private"
          type="user[]"
          mandatory="false"
          min-length="1"
          cardinality="many_to_many"
          linked_column="groups">
        </attribute>
      </attributes>
    </class>
    <class name="dictionary" extend="root_model_object">
      <attributes>
        <attribute
          name="name"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true"  
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,}/$">
        </attribute>
        <attribute
          name="country_code"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true"  
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,}/$">
        </attribute>
        <attribute
          name="words"
          visibility="private"
          type="word[]">
        </attribute>
      </attributes>
    </class>
    <class name="word" extend="root_model_object">
      <attributes>
        <attribute
          name="name"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true"  
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,}/$">
        </attribute>
        <attribute
          name="definitions"
          visibility="private"
          type="string[]"
          mandatory="true"
          min-length="3" >
        </attribute>
      </attributes>
    </class>
    <class name="party" extend="root_model_object">
      <attributes>
        <attribute
          name="start_date"
          visibility="private"
          type="date"
          mandatory="true">
        </attribute>
        <attribute
          name="end_date"
          visibility="private"
          type="date"
          mandatory="false">
        </attribute>
        <attribute
          name="win"
          visibility="private"
          type="bool"
          mandatory="false">
        </attribute>
        <attribute
          name="members"
          visibility="private"
          type="user[]"
          mandatory="true"
          min-length="1" >
        </attribute>
        <attribute
          name="chat"
          visibility="private"
          type="chat"
          mandatory="true">
        </attribute>
        <attribute
          name="word"
          visibility="private"
          type="word"
          mandatory="true">
        </attribute>
      </attributes>
    </class>
    <class name="chat" extend="root_model_object">
      <attributes>
        <attribute
          name="name"
          visibility="private"
          type="string"
          mandatory="true"
          unique="false"  
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,}/$">
        </attribute>
        <attribute
          name="messages"
          visibility="private"
          type="message[]"
          mandatory="false">
        </attribute>
        <attribute
          name="members"
          visibility="private"
          type="user[]"
          mandatory="true"
          min-length="1" >
        </attribute>
      </attributes>
    </class>
    <class name="message" extend="root_model_object">
      <attributes>
        <attribute
          name="content"
          visibility="private"
          type="string"
          mandatory="false"
          unique="false"  
          min-length="1">
        </attribute>
        <attribute
          name="sender"
          visibility="private"
          type="user"
          mandatory="true">
        </attribute>
        <attribute
          name="chat"
          visibility="private"
          type="chat"
          mandatory="true">
        </attribute>
      </attributes>
    </class>
    <class name="team" extend="root_model_object">
      <attributes>
        <attribute
          name="name"
          visibility="private"
          type="string"
          mandatory="true"
          unique="true"  
          min-length="3" 
          pattern="/^[a-zA-Z0-9]{3,}/$">
        </attribute>
        <attribute
          name="members"
          visibility="private"
          type="user[]"
          mandatory="true"
          min-length="2"
          cardinality="many_to_many"
          linked_column="teams">
        </attribute>
        <attribute
          name="chat"
          visibility="private"
          type="chat"
          mandatory="true">
        </attribute>
      </attributes>
    </class>
  </classes>
</model>
